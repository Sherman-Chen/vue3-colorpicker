(function(S,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("@vueuse/core"),require("tinycolor2"),require("gradient-parser"),require("@popperjs/core"),require("vue-types"),require("@aesoper/normal-utils"),require("lodash-es"),require("color-scales")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","tinycolor2","gradient-parser","@popperjs/core","vue-types","@aesoper/normal-utils","lodash-es","color-scales"],e):(S=typeof globalThis<"u"?globalThis:S||self,e(S.BeeComponents={},S.Vue,S.core,S.tinycolor,S.gradientParser,S.core$1,S.propTypes,S.normalUtils,S.lodashEs,S.ColorScale))})(this,function(S,e,b,V,ie,me,f,G,X,be){"use strict";var Xt=Object.defineProperty;var qt=(S,e,b)=>e in S?Xt(S,e,{enumerable:!0,configurable:!0,writable:!0,value:b}):S[e]=b;var N=(S,e,b)=>(qt(S,typeof e!="symbol"?e+"":e,b),b);const Yt="",$=t=>Math.round(t*100)/100;class w{constructor(o){N(this,"instance");N(this,"alphaValue",0);N(this,"redValue",0);N(this,"greenValue",0);N(this,"blueValue",0);N(this,"hueValue",0);N(this,"saturationValue",0);N(this,"brightnessValue",0);N(this,"hslSaturationValue",0);N(this,"lightnessValue",0);N(this,"pst",0);N(this,"initAlpha",()=>{const o=this.instance.getAlpha();this.alphaValue=Math.min(1,o)*100});N(this,"initLightness",()=>{const{s:o,l:n}=this.instance.toHsl();this.hslSaturationValue=$(o),this.lightnessValue=$(n)});N(this,"initRgb",()=>{const{r:o,g:n,b:a}=this.instance.toRgb();this.redValue=$(o),this.greenValue=$(n),this.blueValue=$(a)});N(this,"initHsb",()=>{const{h:o,s:n,v:a}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(o)),this.saturationValue=$(n),this.brightnessValue=$(a)});N(this,"toHexString",()=>this.instance.toHexString());N(this,"toRgbString",()=>this.instance.toRgbString());this.instance=V(o),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(o){return this.instance.toString(o)}get hex(){return this.instance.toHex()}set hex(o){this.instance=V(o),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(o){this.saturation===0&&this.brightness===0&&(this.saturationValue=1,this.brightnessValue=1),this.instance=V({h:$(o),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=$(o)}get hue(){return this.hueValue}set saturation(o){this.instance=V({h:this.hue,s:$(o),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=$(o)}get saturation(){return this.saturationValue}set brightness(o){this.instance=V({h:this.hue,s:this.saturation,v:$(o),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=$(o)}get brightness(){return this.brightnessValue}set lightness(o){this.instance=V({h:this.hue,s:this.hslSaturationValue,l:$(o),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=$(o)}get lightness(){return this.lightnessValue}set red(o){const n=this.instance.toRgb();this.instance=V({...n,r:$(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.redValue=$(o)}get red(){return this.redValue}set green(o){const n=this.instance.toRgb();this.instance=V({...n,g:$(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.greenValue=$(o)}get green(){return this.greenValue}set blue(o){const n=this.instance.toRgb();this.instance=V({...n,b:$(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.blueValue=$(o)}get blue(){return this.blueValue}set alpha(o){this.instance.setAlpha(o/100),this.alphaValue=o}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function de(t,o,n,a){return`rgba(${[t,o,n,a/100].join(",")})`}const U=(t,o,n)=>o<n?t<o?o:t>n?n:t:t<n?n:t>o?o:t,Z="color-history",J=8,ye=e.defineComponent({name:"Alpha",props:{color:f.instanceOf(w),size:f.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let r=t.color||new w;const l=e.reactive({red:r.red,green:r.green,blue:r.blue,alpha:r.alpha});e.watch(()=>t.color,i=>{i&&(r=i,X.merge(l,{red:i.red,green:i.green,blue:i.blue,alpha:i.alpha}))},{deep:!0});const d=e.computed(()=>{const i=de(l.red,l.green,l.blue,0),y=de(l.red,l.green,l.blue,100);return{background:`linear-gradient(to right, ${i} , ${y})`}}),c=()=>{if(n.value&&a.value){const i=l.alpha/100,y=n.value.getBoundingClientRect(),B=a.value.offsetWidth;return Math.round(i*(y.width-B)+B/2)}return 0},u=e.computed(()=>({left:c()+"px",top:0})),_=i=>{i.target!==n.value&&g(i)},g=i=>{if(i.stopPropagation(),n.value&&a.value){const y=n.value.getBoundingClientRect(),B=a.value.offsetWidth;let h=i.clientX-y.left;h=Math.max(B/2,h),h=Math.min(h,y.width-B/2);const s=Math.round((h-B/2)/(y.width-B)*100);r.alpha=s,l.alpha=s,o("change",s)}};return b.tryOnMounted(()=>{const i={drag:y=>{g(y)},end:y=>{g(y)}};n.value&&a.value&&G.DOMUtils.triggerDragEvent(n.value,i)}),{barElement:n,cursorElement:a,getCursorStyle:u,getBackgroundStyle:d,onClickSider:_}}}),jt="",A=(t,o)=>{const n=t.__vccOpts||t;for(const[a,r]of o)n[a]=r;return n};function ke(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-alpha-slider","transparent",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:e.normalizeStyle(t.getBackgroundStyle),onClick:o[0]||(o[0]=(...d)=>t.onClickSider&&t.onClickSider(...d))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-alpha-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",{class:"vc-alpha-slider__bar-handle"},null,-1)]),6)],4)],2)}const Q=A(ye,[["render",ke],["__scopeId","data-v-bcb416bc"]]),_e=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],Be=e.defineComponent({name:"Palette",props:{defaultColors:{type:Array,default:()=>_e}},emits:["change"],setup(t,{emit:o}){const n=r=>r==="advance"||r==="transparent"?{}:{background:V(r).toRgbString()},a=r=>{o("change",r)};return console.log(t.defaultColors),{palettes:t.defaultColors,computedBgStyle:n,onColorChange:a}}}),Ut="",Se={class:"vc-compact"},Ve=["onClick"];function $e(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",Se,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.palettes,(d,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:"vc-compact__row"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d,(u,_)=>(e.openBlock(),e.createElementBlock("div",{key:_,class:"vc-compact__color-cube--wrap",onClick:g=>t.onColorChange(u)},[e.createElementVNode("div",{class:e.normalizeClass(["vc-compact__color_cube",{advance:u==="advance",transparent:u==="transparent"}]),style:e.normalizeStyle(t.computedBgStyle(u))},null,6)],8,Ve))),128))]))),128))])}const ge=A(Be,[["render",$e],["__scopeId","data-v-94b7a9ce"]]),Ee=e.defineComponent({name:"Board",props:{color:f.instanceOf(w),round:f.bool.def(!1),hide:f.bool.def(!0)},emits:["change"],setup(t,{emit:o}){var h,s,C;const n=e.getCurrentInstance(),a={h:((h=t.color)==null?void 0:h.hue)||0,s:1,v:1},r=new w(a).toHexString(),l=e.reactive({hueColor:r,saturation:((s=t.color)==null?void 0:s.saturation)||0,brightness:((C=t.color)==null?void 0:C.brightness)||0}),d=e.ref(0),c=e.ref(0),u=e.ref(),_=e.ref(),g=e.computed(()=>({top:d.value+"px",left:c.value+"px"})),i=()=>{if(n){const p=n.vnode.el;c.value=l.saturation*(p==null?void 0:p.clientWidth),d.value=(1-l.brightness)*(p==null?void 0:p.clientHeight)}},y=p=>{p.target!==_.value&&B(p)},B=p=>{if(n){const H=n.vnode.el,D=H==null?void 0:H.getBoundingClientRect();let L=p.clientX-D.left,M=p.clientY-D.top;L=U(L,0,D.width),M=U(M,0,D.height);const K=L/D.width,k=U(-(M/D.height)+1,0,1);c.value=L,d.value=M,l.saturation=K,l.brightness=k,o("change",K,k)}};return b.tryOnMounted(()=>{n&&n.vnode.el&&u.value&&(G.DOMUtils.triggerDragEvent(u.value,{drag:p=>{B(p)},end:p=>{B(p)}}),e.nextTick(()=>{i()}))}),b.whenever(()=>t.color,p=>{X.merge(l,{hueColor:new w({h:p.hue,s:1,v:1}).toHexString(),saturation:p.saturation,brightness:p.brightness}),i()},{deep:!0}),{state:l,cursorElement:u,getCursorStyle:g,onClickBoard:y}}}),Zt="";function ve(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{ref:"boardElement",class:e.normalizeClass(["vc-saturation",{"vc-saturation__chrome":t.round,"vc-saturation__hidden":t.hide}]),style:e.normalizeStyle({backgroundColor:t.state.hueColor}),onClick:o[0]||(o[0]=(...d)=>t.onClickBoard&&t.onClickBoard(...d))},[o[2]||(o[2]=e.createElementVNode("div",{class:"vc-saturation__white"},null,-1)),o[3]||(o[3]=e.createElementVNode("div",{class:"vc-saturation__black"},null,-1)),e.createElementVNode("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",null,null,-1)]),4)],6)}const T=A(Ee,[["render",ve],["__scopeId","data-v-dc8c7a9d"]]),we=e.defineComponent({name:"Hue",props:{color:f.instanceOf(w),size:f.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let r=t.color||new w;const l=e.reactive({hue:r.hue||0});e.watch(()=>t.color,g=>{g&&(r=g,X.merge(l,{hue:r.hue}))},{deep:!0});const d=()=>{if(n.value&&a.value){const g=n.value.getBoundingClientRect(),i=a.value.offsetWidth;return l.hue===360?g.width-i/2:l.hue%360*(g.width-i)/360+i/2}return 0},c=e.computed(()=>({left:d()+"px",top:0})),u=g=>{g.target!==n.value&&_(g)},_=g=>{if(g.stopPropagation(),n.value&&a.value){const i=n.value.getBoundingClientRect(),y=a.value.offsetWidth;let B=g.clientX-i.left;B=Math.min(B,i.width-y/2),B=Math.max(y/2,B);const h=Math.round((B-y/2)/(i.width-y)*360);r.hue=h,l.hue=h,o("change",h)}};return b.tryOnMounted(()=>{const g={drag:i=>{_(i)},end:i=>{_(i)}};n.value&&a.value&&G.DOMUtils.triggerDragEvent(n.value,g)}),{barElement:n,cursorElement:a,getCursorStyle:c,onClickSider:u}}}),Jt="";function Ne(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-hue-slider",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:o[0]||(o[0]=(...d)=>t.onClickSider&&t.onClickSider(...d))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-hue-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",{class:"vc-hue-slider__bar-handle"},null,-1)]),6)],512)],2)}const x=A(we,[["render",Ne],["__scopeId","data-v-f557cbeb"]]),Pe=e.defineComponent({name:"Lightness",props:{color:f.instanceOf(w),size:f.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let r=t.color||new w;const[l,d,c]=r.HSL,u=e.reactive({hue:l,saturation:d,lightness:c});e.watch(()=>t.color,h=>{if(h){r=h;const[s,C,p]=r.HSL;X.merge(u,{hue:s,saturation:C,lightness:p})}},{deep:!0});const _=e.computed(()=>{const h=V({h:u.hue,s:u.saturation,l:.8}).toPercentageRgbString(),s=V({h:u.hue,s:u.saturation,l:.6}).toPercentageRgbString(),C=V({h:u.hue,s:u.saturation,l:.4}).toPercentageRgbString(),p=V({h:u.hue,s:u.saturation,l:.2}).toPercentageRgbString();return{background:[`linear-gradient(to right, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${p}, rgb(0, 0, 0))`,`-webkit-linear-gradient(left, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${p}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${p}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${p}, rgb(0, 0, 0))`]}}),g=()=>{if(n.value&&a.value){const h=u.lightness,s=n.value.getBoundingClientRect(),C=a.value.offsetWidth;return(1-h)*(s.width-C)+C/2}return 0},i=e.computed(()=>({left:g()+"px",top:0})),y=h=>{h.target!==n.value&&B(h)},B=h=>{if(h.stopPropagation(),n.value&&a.value){const s=n.value.getBoundingClientRect(),C=a.value.offsetWidth;let p=h.clientX-s.left;p=Math.max(C/2,p),p=Math.min(p,s.width-C/2);const H=1-(p-C/2)/(s.width-C);r.lightness=H,o("change",H)}};return b.tryOnMounted(()=>{const h={drag:s=>{B(s)},end:s=>{B(s)}};n.value&&a.value&&G.DOMUtils.triggerDragEvent(n.value,h)}),{barElement:n,cursorElement:a,getCursorStyle:i,getBackgroundStyle:_,onClickSider:y}}}),Qt="";function He(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-lightness-slider",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:e.normalizeStyle(t.getBackgroundStyle),onClick:o[0]||(o[0]=(...d)=>t.onClickSider&&t.onClickSider(...d))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-lightness-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",{class:"vc-lightness-slider__bar-handle"},null,-1)]),6)],4)],2)}const he=A(Pe,[["render",He],["__scopeId","data-v-9836acab"]]),Ae=e.defineComponent({name:"History",props:{colors:f.arrayOf(String).def(()=>[]),round:f.bool.def(!1)},emits:["change"],setup(t,{emit:o}){return{onColorSelect:a=>{o("change",a)}}}}),Tt="",De={key:0,class:"vc-colorPicker__record"},Le={class:"color-list"},Re=["onClick"];function Me(t,o,n,a,r,l){return t.colors&&t.colors.length>0?(e.openBlock(),e.createElementBlock("div",De,[e.createElementVNode("div",Le,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.colors,(d,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:e.normalizeClass(["color-item","transparent",{"color-item__round":t.round}]),onClick:u=>t.onColorSelect(d)},[e.createElementVNode("div",{class:"color-item__display",style:e.normalizeStyle({backgroundColor:d})},null,4)],10,Re))),128))])])):e.createCommentVNode("",!0)}const ee=A(Ae,[["render",Me],["__scopeId","data-v-9369baf5"]]),ze=e.defineComponent({name:"Display",props:{color:f.instanceOf(w),disableAlpha:f.bool.def(!1)},emits:["update:color","change"],setup(t,{emit:o}){var i,y,B,h;const n=e.ref("hex"),a=e.reactive({color:t.color,hex:(i=t.color)==null?void 0:i.hex,alpha:((y=t.color)==null?void 0:y.alpha)+"%",rgba:(B=t.color)==null?void 0:B.RGB,previewBgColor:(h=t.color)==null?void 0:h.toRgbString()}),{isSupported:r,open:l,sRGBHex:d}=b.useEyeDropper(),c=e.computed(()=>({background:a.previewBgColor})),u=()=>{n.value=n.value==="rgba"?"hex":"rgba"},_=b.useDebounceFn(s=>{if(!s.target.value)return;let C=parseInt(s.target.value.replace("%",""));C>100&&(s.target.value="100%",C=100),C<0&&(s.target.value="0%",C=0),isNaN(C)&&(s.target.value="100%",C=100),!isNaN(C)&&a.color&&(a.color.alpha=C),o("update:color",a.color),o("change",a.color)},300),g=b.useDebounceFn((s,C)=>{if(console.log(s.target.value),!!s.target.value){if(n.value==="hex"){const p=s.target.value.replace("#","");V(p).isValid()&&a.color&&(a.color.hex=p)}else if(C!==void 0&&a.rgba&&a.color){s.target.value<0&&(s.target.value=0),C===3&&s.target.value>1&&(s.target.value=1),C<3&&s.target.value>255&&(s.target.value=255),a.rgba[C]=Number(s.target.value);const[p,H,D,L]=a.rgba;a.color.hex=V({r:p,g:H,b:D}).toHex(),a.color.alpha=Math.floor(L*100)}o("update:color",a.color),o("change",a.color)}},300);return b.whenever(()=>t.color,s=>{s&&(a.color=s,a.alpha=Math.floor(a.color.alpha)+"%",a.hex=a.color.hex,a.rgba=a.color.RGB)},{deep:!0}),b.whenever(()=>a.color,()=>{a.color&&(a.previewBgColor=a.color.toRgbString())},{deep:!0}),b.whenever(()=>d.value,()=>{d.value&&(a.color.hex=d.value,o("update:color",a.color),o("change",a.color))}),{state:a,getBgColorStyle:c,inputType:n,onInputTypeChange:u,onAlphaBlur:_,onInputChange:g,isSupported:r,open:l}}}),xt="",Ie={class:"vc-display"},Ke={key:1,class:"vc-current-color2 vc-transparent"},Oe={key:2,style:{display:"flex",flex:"1",gap:"4px",height:"100%"}},We={class:"vc-color-input"},Fe=["value"],Ge={key:0,class:"vc-alpha-input"},Xe=["value"],qe={key:3,style:{display:"flex",flex:"1",gap:"4px",height:"100%"}},Ye=["value","onInput"];function je(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",Ie,[(t.isSupported,e.openBlock(),e.createElementBlock("div",Ke,[e.createElementVNode("div",{class:"color-cube",style:e.normalizeStyle(t.getBgColorStyle)},null,4)])),t.inputType==="hex"?(e.openBlock(),e.createElementBlock("div",Oe,[e.createElementVNode("div",We,[e.createElementVNode("input",{value:t.state.hex,onInput:o[1]||(o[1]=(...d)=>t.onInputChange&&t.onInputChange(...d))},null,40,Fe)]),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ge,[e.createElementVNode("input",{class:"vc-alpha-input__inner",value:parseInt(t.state.alpha),onInput:o[2]||(o[2]=(...d)=>t.onAlphaBlur&&t.onAlphaBlur(...d))},null,40,Xe)]))])):t.state.rgba?(e.openBlock(),e.createElementBlock("div",qe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.state.rgba,(d,c)=>(e.openBlock(),e.createElementBlock("div",{class:"vc-rgb-input",key:c},[e.createElementVNode("div",null,[e.createElementVNode("input",{value:d.toFixed(2),onInput:u=>t.onInputChange(u,c)},null,40,Ye)]),e.createElementVNode("div",null,e.toDisplayString(["R","G","B","A"][c]),1)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"vc-input-toggle",onClick:o[3]||(o[3]=(...d)=>t.onInputTypeChange&&t.onInputTypeChange(...d))})])}const te=A(ze,[["render",je],["__scopeId","data-v-45db4ccf"]]),Ue=e.defineComponent({name:"FkColorPicker",components:{Display:te,Alpha:Q,Palette:ge,Board:T,Hue:x,Lightness:he,History:ee},props:{color:f.instanceOf(w),disableHistory:f.bool.def(!1),roundHistory:f.bool.def(!1),disableAlpha:f.bool.def(!1),defaultColors:{type:Array,default:void 0}},emits:["update:color","change","advanceChange"],setup(t,{emit:o}){console.log(t.defaultColors);const n=t.color||new w,a=e.reactive({color:n,hex:n.toHexString(),rgb:n.toRgbString()}),r=e.ref(!1),l=e.computed(()=>({background:a.rgb})),d=()=>{r.value=!1,o("advanceChange",!1)},c=b.useLocalStorage(Z,[],{}),u=b.useDebounceFn(()=>{if(t.disableHistory)return;const s=a.color.toRgbString();if(c.value=c.value.filter(C=>!V.equals(C,s)),!c.value.includes(s)){for(;c.value.length>J;)c.value.pop();c.value.unshift(s)}},500),_=s=>{s==="advance"?(r.value=!0,o("advanceChange",!0)):(a.color.hex=s,o("advanceChange",!1))},g=s=>{a.color.alpha=s},i=s=>{a.color.hue=s},y=(s,C)=>{a.color.saturation=s,a.color.brightness=C},B=s=>{a.color.lightness=s},h=s=>{const p=s.target.value.replace("#","");V(p).isValid()&&(a.color.hex=p)};return b.whenever(()=>t.color,s=>{s&&(a.color=s)},{deep:!0}),b.whenever(()=>a.color,()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),u(),o("update:color",a.color),o("change",a.color)},{deep:!0}),{state:a,advancePanelShow:r,onBack:d,onCompactChange:_,onAlphaChange:g,onHueChange:i,onBoardChange:y,onLightChange:B,onInputChange:h,previewStyle:l,historyColors:c}}}),eo="",Ze={class:"vc-fk-colorPicker"},Je={class:"vc-fk-colorPicker__inner"},Qe={class:"vc-fk-colorPicker__header"};function Te(t,o,n,a,r,l){const d=e.resolveComponent("Palette"),c=e.resolveComponent("Board"),u=e.resolveComponent("Hue"),_=e.resolveComponent("Lightness"),g=e.resolveComponent("Alpha"),i=e.resolveComponent("Display"),y=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",Ze,[e.createElementVNode("div",Je,[e.createElementVNode("div",Qe,[t.advancePanelShow?(e.openBlock(),e.createElementBlock("span",{key:0,style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...B)=>t.onBack&&t.onBack(...B))},o[1]||(o[1]=[e.createElementVNode("div",{class:"back"},null,-1)]))):e.createCommentVNode("",!0)]),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(d,{key:0,onChange:t.onCompactChange,"default-colors":t.defaultColors},null,8,["onChange","default-colors"])),t.advancePanelShow?(e.openBlock(),e.createBlock(c,{key:1,color:t.state.color,onChange:t.onBoardChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?(e.openBlock(),e.createBlock(u,{key:2,color:t.state.color,onChange:t.onHueChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(_,{key:3,color:t.state.color,onChange:t.onLightChange},null,8,["color","onChange"])),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:4,color:t.state.color,onChange:t.onAlphaChange},null,8,["color","onChange"])),e.createVNode(i,{color:t.state.color,"disable-alpha":t.disableAlpha},null,8,["color","disable-alpha"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(y,{key:5,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])])}const ue=A(Ue,[["render",Te],["__scopeId","data-v-d0dd0ff1"]]),xe=e.defineComponent({name:"ChromeColorPicker",components:{Display:te,Alpha:Q,Board:T,Hue:x,History:ee},props:{color:f.instanceOf(w),disableHistory:f.bool.def(!1),roundHistory:f.bool.def(!1),disableAlpha:f.bool.def(!1)},emits:["update:color","change"],setup(t,{emit:o}){const n=t.color||new w,a=e.reactive({color:n,hex:n.toHexString(),rgb:n.toRgbString()}),r=e.computed(()=>({background:a.rgb})),l=b.useLocalStorage(Z,[],{}),d=b.useDebounceFn(()=>{if(t.disableHistory)return;const i=a.color.toRgbString();if(l.value=l.value.filter(y=>!V.equals(y,i)),!l.value.includes(i)){for(;l.value.length>J;)l.value.pop();l.value.unshift(i)}},500),c=i=>{a.color.alpha=i},u=i=>{a.color.hue=i},_=(i,y)=>{a.color.saturation=i,a.color.brightness=y},g=i=>{i!=="advance"&&(a.color.hex=i)};return b.whenever(()=>t.color,i=>{i&&(a.color=i)},{deep:!0}),b.whenever(()=>a.color,()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),d(),o("update:color",a.color),o("change",a.color)},{deep:!0}),{state:a,previewStyle:r,historyColors:l,onAlphaChange:c,onHueChange:u,onBoardChange:_,onCompactChange:g}}}),to="",et={class:"vc-chrome-colorPicker"},tt={class:"vc-chrome-colorPicker-body"},ot={class:"chrome-controls"},nt={class:"chrome-sliders"};function at(t,o,n,a,r,l){const d=e.resolveComponent("Board"),c=e.resolveComponent("Hue"),u=e.resolveComponent("Alpha"),_=e.resolveComponent("Display"),g=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",et,[e.createVNode(d,{round:!0,hide:!1,color:t.state.color,onChange:t.onBoardChange},null,8,["color","onChange"]),e.createElementVNode("div",tt,[e.createElementVNode("div",ot,[e.createElementVNode("div",nt,[e.createVNode(c,{size:"small",color:t.state.color,onChange:t.onHueChange},null,8,["color","onChange"]),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:0,size:"small",color:t.state.color,onChange:t.onAlphaChange},null,8,["color","onChange"]))])]),e.createVNode(_,{color:t.state.color,"disable-alpha":t.disableAlpha},null,8,["color","disable-alpha"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:0,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])])}const fe=A(xe,[["render",at],["__scopeId","data-v-00ebf251"]]),oe="ColorPickersProvider",rt=(t,o)=>{const n=t.getBoundingClientRect(),a=n.left+n.width/2,r=n.top+n.height/2,l=Math.abs(a-o.clientX),d=Math.abs(r-o.clientY),c=Math.sqrt(Math.pow(l,2)+Math.pow(d,2)),u=d/c,_=Math.acos(u);let g=Math.floor(180/(Math.PI/_));return o.clientX>a&&o.clientY>r&&(g=180-g),o.clientX==a&&o.clientY>r&&(g=180),o.clientX>a&&o.clientY==r&&(g=90),o.clientX<a&&o.clientY>r&&(g=180+g),o.clientX<a&&o.clientY==r&&(g=270),o.clientX<a&&o.clientY<r&&(g=360-g),g};let ne=!1;const lt=(t,o)=>{const n=function(r){var l;(l=o.drag)==null||l.call(o,r)},a=function(r){var l;document.removeEventListener("mousemove",n,!1),document.removeEventListener("mouseup",a,!1),document.onselectstart=null,document.ondragstart=null,ne=!1,(l=o.end)==null||l.call(o,r)};t&&t.addEventListener("mousedown",r=>{var l;ne||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",a,!1),ne=!0,(l=o.start)==null||l.call(o,r))})},oo="",st={angle:{type:Number,default:0},size:{type:Number,default:16,validator:t=>t>=16},borderWidth:{type:Number,default:1,validator:t=>t>=1},borderColor:{type:String,default:"#666"}},ct=e.defineComponent({name:"Angle",props:st,emits:["update:angle","change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(0);e.watch(()=>t.angle,c=>{a.value=c});const r=()=>{let c=Number(a.value);isNaN(c)||(c=c>360||c<0?t.angle:c,a.value=c===360?0:c,o("update:angle",a.value),o("change",a.value))},l=e.computed(()=>({width:t.size+"px",height:t.size+"px",borderWidth:t.borderWidth+"px",borderColor:t.borderColor,transform:`rotate(${a.value}deg)`})),d=c=>{n.value&&(a.value=rt(n.value,c)%360,r())};return e.onMounted(()=>{const c={drag:u=>{d(u)},end:u=>{d(u)}};n.value&&lt(n.value,c)}),()=>e.createVNode("div",{class:"bee-angle"},[e.createVNode("div",{class:"bee-angle__round",ref:n,style:l.value},null)])}});function q(t){let o;if(Array.isArray(t))o=[],t.forEach(n=>{o.push(q(n))});else if(typeof t=="object"&&t!==null){o={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(o[n]=q(t[n]))}else o=t;return o}function it(t,o=2){const n=new RegExp(`^\\d+(?:\\.\\d{0,${o}})?`,"g");return t.match(n)?t.match(n):""}const dt=e.defineComponent({name:"GradientColorPicker",components:{Angle:ct,Display:te,Alpha:Q,Palette:ge,Board:T,Hue:x,Lightness:he,History:ee},props:{angle:f.number.def(0),type:f.oneOf(["linear","radial"]).def("linear"),disableHistory:f.bool.def(!1),roundHistory:f.bool.def(!1),disableAlpha:f.bool.def(!1),pickerType:f.oneOf(["fk","chrome"]).def("fk"),colors:f.array.def([]),colorStops:f.array.def([]),gradientType:f.oneOf(["both","liner","radial"]).def("both"),defaultColors:{type:Array,default:void 0}},emits:["update:startColor","update:endColor","update:angle","gradientChange","advanceChange","angleChange","typeChange"],setup(t,{emit:o}){const n=e.reactive({angle:t.angle,type:t.gradientType=="both"?t.type:t.gradientType,colors:t.colors,colorStops:t.colorStops,selectIndex:0,movePst:{x:0,y:0},pageX:0,pageY:0,mouseStartPst:{x:0,y:0},startMovePst:0});let a=!1;const r=e.inject(oe),l=e.ref(t.pickerType==="chrome"),d=e.ref(),c=e.ref(),u=e.ref(),_=e.ref();e.watch(()=>[t.angle],m=>{n.angle=m[0]}),e.watch(()=>t.type,m=>{n.type=m});const g=e.computed({get:()=>n.colors[n.selectIndex],set:m=>{n.colors[n.selectIndex]=m}}),i=e.computed(()=>{const m=q(n.colors).sort((R,j)=>R.pst-j.pst).map(R=>`${R.toRgbString()} ${it(String(R.pst)||"",5)}%`);let v=`background:linear-gradient(${n.angle}deg, ${m.join(",")})`;return n.type==="radial"&&(v=`background: radial-gradient(circle,  ${m.join(",")})`),v}),y=e.computed(()=>t.gradientType=="both"?["linear","radial"]:[]),B=m=>{a&&(n.movePst.x=m.pageX-n.mouseStartPst.x,n.movePst.y=m.pageY-n.mouseStartPst.y,n.pageX=m.pageX,n.pageY=m.pageY,h())},h=()=>{if(_.value){const m=_.value.getBoundingClientRect().width;let v=(n.startMovePst*m/100+n.movePst.x)/m;v>1?v=1:v<0&&(v=0),n.colors[n.selectIndex].pst=Math.round(v*100),o("gradientChange",n.colors)}},s=()=>{a=!1,C()},C=()=>{p()},p=()=>{a=!1,n.mouseStartPst={x:0,y:0},n.movePst.x=0,n.movePst.y=0},H=()=>{b.useEventListener(document.body,"mousemove",B),b.useEventListener(document.body,"mouseup",s)},D=m=>{m.key==="Delete"&&n.colors.length>2&&(n.colors.splice(n.selectIndex,1),n.selectIndex=Math.min(n.selectIndex,n.colors.length-1),o("gradientChange",n.colors))};b.useEventListener(window,"keydown",D);const L=m=>{n.selectIndex!==m&&(n.selectIndex=m)},M=()=>{n.startMovePst=n.colors[n.selectIndex].pst},K=(m,v)=>{H();const R=v;L(m),a=!0,n.mouseStartPst.x=R.pageX,n.mouseStartPst.y=R.pageY,M()},k=m=>{if(_.value){const v=_.value.getBoundingClientRect(),R=v.left,j=m.pageX-R,Ot=q(n.colors).sort((ce,Gt)=>ce.pst-Gt.pst).map(ce=>ce.toHexString()),Wt=new be(0,v.width,Ot).getColor(j).toHexString(),Ft=100*j/v.width,Ce=new w(Wt);Ce.pst=Ft,n.colors.push(Ce),n.selectIndex=n.colors.length-1,o("gradientChange",n.colors)}},E=m=>{const v=m.target,R=parseInt(v.value.replace("°",""));isNaN(R)||(n.angle=R%360),o("update:angle",n.angle),o("angleChange",n.angle)},P=m=>{n.angle=m,o("update:angle",n.angle),o("angleChange",n.angle)},F=m=>{m==="advance"?(l.value=!0,o("advanceChange",!0)):(g.value.hex=m,o("advanceChange",!1)),z()},O=m=>{g.value.alpha=m,z()},ae=m=>{g.value.hue=m,z()},re=(m,v)=>{g.value.saturation=m,g.value.brightness=v,z()},le=m=>{g.value.lightness=m,z()},se=()=>{z()},z=()=>{o("gradientChange",n.colors)},Y=()=>{l.value=!1,o("advanceChange",!1)},It=()=>{n.type=n.type==="linear"?"radial":"linear",o("typeChange",n.type)},I=b.useLocalStorage(Z,[],{}),Kt=b.useDebounceFn(()=>{if(t.disableHistory)return;const m=g.value.toRgbString();if(I.value=I.value.filter(v=>!V.equals(v,m)),!I.value.includes(m)){for(;I.value.length>J;)I.value.pop();I.value.unshift(m)}},100);return b.whenever(()=>g.value,()=>{Kt()},{deep:!0}),{handlePotBar:k,refColorBar:_,startGradientRef:d,stopGradientRef:c,colorRangeRef:u,state:n,currentColor:g,gradientBg:i,advancePanelShow:l,onDegreeBlur:E,onCompactChange:F,onAlphaChange:O,onHueChange:ae,onBoardChange:re,onLightChange:le,historyColors:I,onBack:Y,onDegreeChange:P,onDisplayChange:se,onTypeChange:It,lang:r==null?void 0:r.lang,sliderPotDown:K,clickGColorPot:L,getGradientTypes:y}}}),no="",gt={class:"vc-gradient-picker"},ht={class:"vc-gradient-picker__header"},ut={key:0,class:"vc-gradient__types"},ft={class:"vc-gradient-picker__body"},pt={class:"vc-color-range",ref:"colorRangeRef"},Ct={class:"vc-color-range__container",ref:"refColorBar"},mt={class:"vc-gradient__stop__container"},bt=["onMousedown","onClick"],yt={class:"vc-picker-degree-input vc-degree-input"},kt={class:"vc-degree-input__control"},_t=["value"],Bt={class:"vc-degree-input__panel"},St={class:"vc-degree-input__disk"};function Vt(t,o,n,a,r,l){const d=e.resolveComponent("Angle"),c=e.resolveComponent("Board"),u=e.resolveComponent("Hue"),_=e.resolveComponent("Palette"),g=e.resolveComponent("Lightness"),i=e.resolveComponent("Alpha"),y=e.resolveComponent("Display"),B=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",gt,[e.createElementVNode("div",ht,[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("div",{class:"back",style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...h)=>t.onBack&&t.onBack(...h))},null,512),[[e.vShow,t.pickerType==="fk"&&t.advancePanelShow]])]),t.getGradientTypes.length==2?(e.openBlock(),e.createElementBlock("div",ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.getGradientTypes,h=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-gradient__type",{active:t.state.type===h}]),key:h,onClick:o[1]||(o[1]=(...s)=>t.onTypeChange&&t.onTypeChange(...s))},e.toDisplayString(t.lang?t.lang[h]:h),3))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("div",ft,[e.createElementVNode("div",pt,[e.createElementVNode("div",Ct,[e.createElementVNode("div",{class:"vc-background",style:e.normalizeStyle(t.gradientBg),onClick:o[2]||(o[2]=(...h)=>t.handlePotBar&&t.handlePotBar(...h))},null,4),e.createElementVNode("div",mt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.colors,(h,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-gradient__stop",{"vc-gradient__stop--current":s==t.state.selectIndex}]),key:s,ref_for:!0,ref:"startGradientRef",style:e.normalizeStyle({left:`calc(${h.pst+"%"} - 8px)`}),onMousedown:C=>t.sliderPotDown(s,C),onClick:C=>t.clickGColorPot(s)},o[5]||(o[5]=[e.createElementVNode("span",{class:"vc-gradient__stop--inner"},null,-1)]),46,bt))),128))])],512)],512),e.createElementVNode("div",yt,[e.createElementVNode("div",kt,[e.createElementVNode("input",{value:t.state.angle,onBlur:o[3]||(o[3]=(...h)=>t.onDegreeBlur&&t.onDegreeBlur(...h))},null,40,_t),o[6]||(o[6]=e.createTextVNode("deg "))]),e.createElementVNode("div",Bt,[e.createElementVNode("div",St,[e.createVNode(d,{angle:t.state.angle,"onUpdate:angle":o[4]||(o[4]=h=>t.state.angle=h),size:40,onChange:t.onDegreeChange},null,8,["angle","onChange"])])])])]),t.advancePanelShow?(e.openBlock(),e.createBlock(c,{key:0,color:t.currentColor,onChange:t.onBoardChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?(e.openBlock(),e.createBlock(u,{key:1,color:t.currentColor,onChange:t.onHueChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(_,{key:2,onChange:t.onCompactChange,"default-colors":t.defaultColors},null,8,["onChange","default-colors"])),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:3,color:t.currentColor,onChange:t.onLightChange},null,8,["color","onChange"])),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(i,{key:4,color:t.currentColor,onChange:t.onAlphaChange},null,8,["color","onChange"])),e.createVNode(y,{color:t.currentColor,"disable-alpha":t.disableAlpha,onChange:t.onDisplayChange},null,8,["color","disable-alpha","onChange"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(B,{key:5,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])}const pe=A(dt,[["render",Vt],["__scopeId","data-v-8e205bb5"]]),$t=e.defineComponent({name:"WrapContainer",props:{theme:f.oneOf(["white","black"]).def("white"),showTab:f.bool.def(!1),activeKey:f.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(t,{emit:o}){const n=e.reactive({activeKey:t.activeKey}),a=e.inject(oe),r=l=>{n.activeKey=l,o("update:activeKey",l),o("change",l)};return b.whenever(()=>t.activeKey,l=>{n.activeKey=l}),{state:n,onActiveKeyChange:r,lang:a==null?void 0:a.lang}}}),ao="",Et={class:"vc-colorpicker--container"},vt={key:0,class:"vc-colorpicker--tabs"},wt={class:"vc-colorpicker--tabs__inner"},Nt={class:"vc-btn__content"},Pt={class:"vc-btn__content"};function Ht(t,o,n,a,r,l){var d,c;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-colorpicker",t.theme])},[e.createElementVNode("div",Et,[t.showTab?(e.openBlock(),e.createElementBlock("div",vt,[e.createElementVNode("div",wt,[e.createElementVNode("div",{class:e.normalizeClass(["vc-colorpicker--tabs__btn",{"vc-btn-active":t.state.activeKey==="pure"}]),onClick:o[0]||(o[0]=u=>t.onActiveKeyChange("pure"))},[e.createElementVNode("button",null,[e.createElementVNode("div",Nt,e.toDisplayString((d=t.lang)==null?void 0:d.pure),1)])],2),e.createElementVNode("div",{class:e.normalizeClass(["vc-colorpicker--tabs__btn",{"vc-btn-active":t.state.activeKey==="gradient"}]),onClick:o[1]||(o[1]=u=>t.onActiveKeyChange("gradient"))},[e.createElementVNode("button",null,[e.createElementVNode("div",Pt,e.toDisplayString((c=t.lang)==null?void 0:c.gradient),1)])],2),e.createElementVNode("div",{class:"vc-colorpicker--tabs__bg",style:e.normalizeStyle({width:"50%",left:`calc(${t.state.activeKey==="gradient"?50:0}%)`})},null,4)])])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"default",{},void 0,!0)])],2)}const At=A($t,[["render",Ht],["__scopeId","data-v-73cd7770"]]),Dt={En:{start:"Start",end:"End",pure:"Pure",gradient:"Gradient",linear:"linear",radial:"radial"},"ZH-cn":{start:"开始",end:"结束",pure:"纯色",gradient:"渐变",linear:"线性",radial:"径向"}},Lt={isWidget:f.bool.def(!1),pickerType:f.oneOf(["fk","chrome"]).def("fk"),shape:f.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:f.string.def(""),format:{type:String,default:"rgb"},disableAlpha:f.bool.def(!1),disableHistory:f.bool.def(!1),roundHistory:f.bool.def(!1),useType:f.oneOf(["pure","gradient","both"]).def("pure"),activeKey:f.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:f.number.def(9999),pickerContainer:{type:[String,HTMLElement],default:"body"},debounce:f.number.def(100),theme:f.oneOf(["white","black"]).def("white"),gradientData:f.object.def({}),gradientType:f.oneOf(["both","liner","radial"]).def("both"),defaultColors:{type:Array,default:void 0}},Rt=e.defineComponent({name:"ColorPicker",components:{FkColorPicker:ue,ChromeColorPicker:fe,GradientColorPicker:pe,WrapContainer:At},inheritAttrs:!1,props:Lt,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange","update:gradientData","gradientDataChange"],setup(t,{emit:o}){e.provide(oe,{lang:e.computed(()=>Dt[t.lang||"ZH-cn"])});const n=e.reactive({pureColor:t.pureColor||"",activeKey:t.useType==="gradient"?"gradient":t.activeKey,isAdvanceMode:!1}),a=new w(n.pureColor),r=e.reactive({colors:[],angle:0,type:"linear",gradientColor:t.gradientColor});!t.gradientColor&&t.gradientData&&t.gradientData.gradientColor?r.gradientColor=t.gradientData.gradientColor||"linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)":t.gradientColor||(r.gradientColor="linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)");const l=e.ref(a),d=e.ref(!1),c=e.ref(null),u=e.ref(null);let _=null;const g=e.computed(()=>({background:n.activeKey!=="gradient"?V(n.pureColor).toRgbString():r.gradientColor})),i=e.computed(()=>n.activeKey==="gradient"?pe.name:t.pickerType==="fk"?ue.name:fe.name),y=k=>{n.isAdvanceMode=k},B=e.computed(()=>{const k={disableAlpha:t.disableAlpha,disableHistory:t.disableHistory,roundHistory:t.roundHistory,pickerType:t.pickerType,defaultColors:t.defaultColors};return n.activeKey==="gradient"?{...k,angle:r.angle,type:r.type,colors:r.colors,gradientType:t.gradientType,onAngleChange:E=>{r.angle=E,p()},onTypeChange:E=>{r.type=E,p()},onGradientChange:E=>{r.colors=E,p()},onAdvanceChange:y}:{...k,disableAlpha:t.disableAlpha,disableHistory:t.disableHistory,roundHistory:t.roundHistory,color:l.value,onChange:L,onAdvanceChange:y}}),h=()=>{d.value=!0,_?_.update():D()},s=()=>{d.value=!1},C=()=>{var k,E;try{const[P]=ie.parse(r.gradientColor);P&&P.type.includes("gradient")&&P.colorStops.length>=2&&(P.colorStops.forEach((F,O)=>{var Y;const ae=Number((Y=F.length)==null?void 0:Y.value)||0,[re,le,se,z]=F.value;r.colors[O]=new w({r:Number(re),g:Number(le),b:Number(se),a:Number(z)}),r.colors[O].pst=ae}),P.type==="linear-gradient"&&((k=P.orientation)==null?void 0:k.type)==="angular"&&(r.angle=Number((E=P.orientation)==null?void 0:E.value)||0),r.type=P.type.split("-")[0])}catch(P){console.log(`[Parse Color]: ${P}`)}},p=b.useDebounceFn(()=>{const k=H();try{r.gradientColor=ie.stringify(k),o("update:gradientColor",r.gradientColor),o("gradientColorChange",r.gradientColor);const E=k[0];E.gradientColor=r.gradientColor,o("gradientDataChange",E),o("update:gradientData",E)}catch(E){console.log(E)}},t.debounce),H=()=>{const k=[],E=r.colors.map(P=>({type:"rgba",value:P.RGB.map(O=>O.toString()),length:{value:P.pst+"",type:"%"}}));return r.type==="linear"?k.push({type:"linear-gradient",orientation:{type:"angular",value:r.angle+""},colorStops:E}):r.type==="radial"&&k.push({type:"radial-gradient",orientation:[{type:"shape",value:"circle"}],colorStops:E}),k},D=()=>{c.value&&u.value&&(_=me.createPopper(c.value,u.value,{placement:"auto",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"flip",options:{allowedAutoPlacements:["top","bottom","left","right"],rootBoundary:"viewport"}}]}))},L=k=>{l.value=k,n.pureColor=k.toString(t.format),M()},M=b.useDebounceFn(()=>{o("update:pureColor",n.pureColor),o("pureColorChange",n.pureColor)},t.debounce);b.onClickOutside(u,()=>{s()});const K=k=>{n.activeKey=k,o("update:activeKey",k),o("activeKeyChange",k)};return b.tryOnMounted(()=>{C()}),b.whenever(()=>t.gradientColor,k=>{k!=r.gradientColor&&(r.gradientColor=k)}),b.whenever(()=>r.gradientColor,()=>{C()}),b.whenever(()=>t.activeKey,k=>{n.activeKey=k}),b.whenever(()=>t.useType,k=>{n.activeKey!=="gradient"&&k==="gradient"?n.activeKey="gradient":n.activeKey="pure"}),b.whenever(()=>t.pureColor,k=>{V.equals(k,n.pureColor)||(n.pureColor=k,l.value=new w(k))},{deep:!0}),{colorCubeRef:c,pickerRef:u,showPicker:d,colorInstance:l,getBgColorStyle:g,onColorChange:L,onShowPicker:h,onActiveKeyChange:K,getComponentName:i,getBindArgs:B,state:n}}}),so="";function Mt(t,o,n,a,r,l){const d=e.resolveComponent("WrapContainer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.isWidget?(e.openBlock(),e.createBlock(d,{key:0,"active-key":t.state.activeKey,"onUpdate:activeKey":o[0]||(o[0]=c=>t.state.activeKey=c),"show-tab":t.useType==="both",onChange:t.onActiveKeyChange,style:e.normalizeStyle({zIndex:t.zIndex}),theme:t.theme},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponentName),e.mergeProps({key:t.getComponentName},t.getBindArgs),null,16))]),_:1},8,["active-key","show-tab","onChange","style","theme"])):e.createCommentVNode("",!0),t.isWidget?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",{class:e.normalizeClass(["vc-color-wrap transparent",{round:t.shape==="circle"}]),ref:"colorCubeRef"},[e.createElementVNode("div",{class:"current-color",style:e.normalizeStyle(t.getBgColorStyle),onClick:o[1]||(o[1]=(...c)=>t.onShowPicker&&t.onShowPicker(...c))},null,4)],2),(e.openBlock(),e.createBlock(e.Teleport,{to:t.pickerContainer},[e.withDirectives(e.createElementVNode("div",{ref:"pickerRef",style:e.normalizeStyle({zIndex:t.zIndex})},[t.showPicker?(e.openBlock(),e.createBlock(d,{key:0,"show-tab":t.useType==="both"&&!t.state.isAdvanceMode,"active-key":t.state.activeKey,"onUpdate:activeKey":o[2]||(o[2]=c=>t.state.activeKey=c),onChange:t.onActiveKeyChange,theme:t.theme},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponentName),e.mergeProps({key:t.getComponentName},t.getBindArgs),null,16))]),_:1},8,["show-tab","active-key","onChange","theme"])):e.createCommentVNode("",!0)],4),[[e.vShow,t.showPicker]])],8,["to"]))],64))],64)}const W=A(Rt,[["render",Mt],["__scopeId","data-v-457e5e58"]]),zt={install:t=>{t.component(W.name,W),t.component("Vue3"+W.name,W)}};S.Color=w,S.ColorPicker=W,S.default=zt,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});

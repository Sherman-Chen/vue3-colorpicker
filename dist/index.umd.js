(function(S,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("@vueuse/core"),require("tinycolor2"),require("gradient-parser"),require("@popperjs/core"),require("vue-types"),require("@aesoper/normal-utils"),require("lodash-es"),require("color-scales")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","tinycolor2","gradient-parser","@popperjs/core","vue-types","@aesoper/normal-utils","lodash-es","color-scales"],e):(S=typeof globalThis<"u"?globalThis:S||self,e(S.BeeComponents={},S.Vue,S.core,S.tinycolor,S.gradientParser,S.core$1,S.propTypes,S.normalUtils,S.lodashEs,S.ColorScale))})(this,function(S,e,b,V,de,be,p,X,q,ye){"use strict";var Xt=Object.defineProperty;var qt=(S,e,b)=>e in S?Xt(S,e,{enumerable:!0,configurable:!0,writable:!0,value:b}):S[e]=b;var N=(S,e,b)=>(qt(S,typeof e!="symbol"?e+"":e,b),b);const Yt="",$=t=>Math.round(t*100)/100;class w{constructor(o){N(this,"instance");N(this,"alphaValue",0);N(this,"redValue",0);N(this,"greenValue",0);N(this,"blueValue",0);N(this,"hueValue",0);N(this,"saturationValue",0);N(this,"brightnessValue",0);N(this,"hslSaturationValue",0);N(this,"lightnessValue",0);N(this,"pst",0);N(this,"initAlpha",()=>{const o=this.instance.getAlpha();this.alphaValue=Math.min(1,o)*100});N(this,"initLightness",()=>{const{s:o,l:n}=this.instance.toHsl();this.hslSaturationValue=$(o),this.lightnessValue=$(n)});N(this,"initRgb",()=>{const{r:o,g:n,b:a}=this.instance.toRgb();this.redValue=$(o),this.greenValue=$(n),this.blueValue=$(a)});N(this,"initHsb",()=>{const{h:o,s:n,v:a}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(o)),this.saturationValue=$(n),this.brightnessValue=$(a)});N(this,"toHexString",()=>this.instance.toHexString());N(this,"toRgbString",()=>this.instance.toRgbString());this.instance=V(o),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(o){return this.instance.toString(o)}get hex(){return this.instance.toHex()}set hex(o){this.instance=V(o),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(o){this.saturation===0&&this.brightness===0&&(this.saturationValue=1,this.brightnessValue=1),this.instance=V({h:$(o),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=$(o)}get hue(){return this.hueValue}set saturation(o){this.instance=V({h:this.hue,s:$(o),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=$(o)}get saturation(){return this.saturationValue}set brightness(o){this.instance=V({h:this.hue,s:this.saturation,v:$(o),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=$(o)}get brightness(){return this.brightnessValue}set lightness(o){this.instance=V({h:this.hue,s:this.hslSaturationValue,l:$(o),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=$(o)}get lightness(){return this.lightnessValue}set red(o){const n=this.instance.toRgb();this.instance=V({...n,r:$(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.redValue=$(o)}get red(){return this.redValue}set green(o){const n=this.instance.toRgb();this.instance=V({...n,g:$(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.greenValue=$(o)}get green(){return this.greenValue}set blue(o){const n=this.instance.toRgb();this.instance=V({...n,b:$(o),a:this.alphaValue/100}),this.initHsb(),this.initLightness(),this.blueValue=$(o)}get blue(){return this.blueValue}set alpha(o){this.instance.setAlpha(o/100),this.alphaValue=o}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function ge(t,o,n,a){return`rgba(${[t,o,n,a/100].join(",")})`}const J=(t,o,n)=>o<n?t<o?o:t>n?n:t:t<n?n:t>o?o:t,Q="color-history",T=8,ke=e.defineComponent({name:"Alpha",props:{color:p.instanceOf(w),size:p.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let r=t.color||new w;const l=e.reactive({red:r.red,green:r.green,blue:r.blue,alpha:r.alpha});e.watch(()=>t.color,c=>{c&&(r=c,q.merge(l,{red:c.red,green:c.green,blue:c.blue,alpha:c.alpha}))},{deep:!0});const d=e.computed(()=>{const c=ge(l.red,l.green,l.blue,0),y=ge(l.red,l.green,l.blue,100);return{background:`linear-gradient(to right, ${c} , ${y})`}}),i=()=>{if(n.value&&a.value){const c=l.alpha/100,y=n.value.getBoundingClientRect(),B=a.value.offsetWidth;return Math.round(c*(y.width-B)+B/2)}return 0},u=e.computed(()=>({left:i()+"px",top:0})),_=c=>{c.target!==n.value&&g(c)},g=c=>{if(c.stopPropagation(),n.value&&a.value){const y=n.value.getBoundingClientRect(),B=a.value.offsetWidth;let h=c.clientX-y.left;h=Math.max(B/2,h),h=Math.min(h,y.width-B/2);const s=Math.round((h-B/2)/(y.width-B)*100);r.alpha=s,l.alpha=s,o("change",s)}};return b.tryOnMounted(()=>{const c={drag:y=>{g(y)},end:y=>{g(y)}};n.value&&a.value&&X.DOMUtils.triggerDragEvent(n.value,c)}),{barElement:n,cursorElement:a,getCursorStyle:u,getBackgroundStyle:d,onClickSider:_}}}),jt="",A=(t,o)=>{const n=t.__vccOpts||t;for(const[a,r]of o)n[a]=r;return n};function _e(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-alpha-slider","transparent",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:e.normalizeStyle(t.getBackgroundStyle),onClick:o[0]||(o[0]=(...d)=>t.onClickSider&&t.onClickSider(...d))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-alpha-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",{class:"vc-alpha-slider__bar-handle"},null,-1)]),6)],4)],2)}const x=A(ke,[["render",_e],["__scopeId","data-v-bcb416bc"]]),Be=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],Se=e.defineComponent({name:"Palette",props:{defaultColors:{type:Array,default:()=>Be}},emits:["change"],setup(t,{emit:o}){const n=r=>r==="advance"||r==="transparent"?{}:{background:V(r).toRgbString()},a=r=>{o("change",r)};return{palettes:t.defaultColors,computedBgStyle:n,onColorChange:a}}}),Ut="",Ve={class:"vc-compact"},$e=["onClick"];function Ee(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",Ve,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.palettes,(d,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:"vc-compact__row"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d,(u,_)=>(e.openBlock(),e.createElementBlock("div",{key:_,class:"vc-compact__color-cube--wrap",onClick:g=>t.onColorChange(u)},[e.createElementVNode("div",{class:e.normalizeClass(["vc-compact__color_cube",{advance:u==="advance",transparent:u==="transparent"}]),style:e.normalizeStyle(t.computedBgStyle(u))},null,6)],8,$e))),128))]))),128))])}const he=A(Se,[["render",Ee],["__scopeId","data-v-40b33f10"]]),ve=e.defineComponent({name:"Board",props:{color:p.instanceOf(w),round:p.bool.def(!1),hide:p.bool.def(!0)},emits:["change"],setup(t,{emit:o}){var h,s,C;const n=e.getCurrentInstance(),a={h:((h=t.color)==null?void 0:h.hue)||0,s:1,v:1},r=new w(a).toHexString(),l=e.reactive({hueColor:r,saturation:((s=t.color)==null?void 0:s.saturation)||0,brightness:((C=t.color)==null?void 0:C.brightness)||0}),d=e.ref(0),i=e.ref(0),u=e.ref(),_=e.ref(),g=e.computed(()=>({top:d.value+"px",left:i.value+"px"})),c=()=>{if(n){const f=n.vnode.el;i.value=l.saturation*(f==null?void 0:f.clientWidth),d.value=(1-l.brightness)*(f==null?void 0:f.clientHeight)}},y=f=>{f.target!==_.value&&B(f)},B=f=>{if(n){const H=n.vnode.el,D=H==null?void 0:H.getBoundingClientRect();let L=f.clientX-D.left,M=f.clientY-D.top;L=J(L,0,D.width),M=J(M,0,D.height);const K=L/D.width,k=J(-(M/D.height)+1,0,1);i.value=L,d.value=M,l.saturation=K,l.brightness=k,o("change",K,k)}};return b.tryOnMounted(()=>{n&&n.vnode.el&&u.value&&(X.DOMUtils.triggerDragEvent(u.value,{drag:f=>{B(f)},end:f=>{B(f)}}),e.nextTick(()=>{c()}))}),b.whenever(()=>t.color,f=>{q.merge(l,{hueColor:new w({h:f.hue,s:1,v:1}).toHexString(),saturation:f.saturation,brightness:f.brightness}),c()},{deep:!0}),{state:l,cursorElement:u,getCursorStyle:g,onClickBoard:y}}}),Zt="";function we(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{ref:"boardElement",class:e.normalizeClass(["vc-saturation",{"vc-saturation__chrome":t.round,"vc-saturation__hidden":t.hide}]),style:e.normalizeStyle({backgroundColor:t.state.hueColor}),onClick:o[0]||(o[0]=(...d)=>t.onClickBoard&&t.onClickBoard(...d))},[o[2]||(o[2]=e.createElementVNode("div",{class:"vc-saturation__white"},null,-1)),o[3]||(o[3]=e.createElementVNode("div",{class:"vc-saturation__black"},null,-1)),e.createElementVNode("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",null,null,-1)]),4)],6)}const ee=A(ve,[["render",we],["__scopeId","data-v-dc8c7a9d"]]),Ne=e.defineComponent({name:"Hue",props:{color:p.instanceOf(w),size:p.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let r=t.color||new w;const l=e.reactive({hue:r.hue||0});e.watch(()=>t.color,g=>{g&&(r=g,q.merge(l,{hue:r.hue}))},{deep:!0});const d=()=>{if(n.value&&a.value){const g=n.value.getBoundingClientRect(),c=a.value.offsetWidth;return l.hue===360?g.width-c/2:l.hue%360*(g.width-c)/360+c/2}return 0},i=e.computed(()=>({left:d()+"px",top:0})),u=g=>{g.target!==n.value&&_(g)},_=g=>{if(g.stopPropagation(),n.value&&a.value){const c=n.value.getBoundingClientRect(),y=a.value.offsetWidth;let B=g.clientX-c.left;B=Math.min(B,c.width-y/2),B=Math.max(y/2,B);const h=Math.round((B-y/2)/(c.width-y)*360);r.hue=h,l.hue=h,o("change",h)}};return b.tryOnMounted(()=>{const g={drag:c=>{_(c)},end:c=>{_(c)}};n.value&&a.value&&X.DOMUtils.triggerDragEvent(n.value,g)}),{barElement:n,cursorElement:a,getCursorStyle:i,onClickSider:u}}}),Jt="";function Pe(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-hue-slider",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:o[0]||(o[0]=(...d)=>t.onClickSider&&t.onClickSider(...d))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-hue-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",{class:"vc-hue-slider__bar-handle"},null,-1)]),6)],512)],2)}const te=A(Ne,[["render",Pe],["__scopeId","data-v-f557cbeb"]]),He=e.defineComponent({name:"Lightness",props:{color:p.instanceOf(w),size:p.oneOf(["small","default"]).def("default")},emits:["change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(null);let r=t.color||new w;const[l,d,i]=r.HSL,u=e.reactive({hue:l,saturation:d,lightness:i});e.watch(()=>t.color,h=>{if(h){r=h;const[s,C,f]=r.HSL;q.merge(u,{hue:s,saturation:C,lightness:f})}},{deep:!0});const _=e.computed(()=>{const h=V({h:u.hue,s:u.saturation,l:.8}).toPercentageRgbString(),s=V({h:u.hue,s:u.saturation,l:.6}).toPercentageRgbString(),C=V({h:u.hue,s:u.saturation,l:.4}).toPercentageRgbString(),f=V({h:u.hue,s:u.saturation,l:.2}).toPercentageRgbString();return{background:[`linear-gradient(to right, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${f}, rgb(0, 0, 0))`,`-webkit-linear-gradient(left, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${f}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${f}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${h}, ${s}, ${C}, ${f}, rgb(0, 0, 0))`]}}),g=()=>{if(n.value&&a.value){const h=u.lightness,s=n.value.getBoundingClientRect(),C=a.value.offsetWidth;return(1-h)*(s.width-C)+C/2}return 0},c=e.computed(()=>({left:g()+"px",top:0})),y=h=>{h.target!==n.value&&B(h)},B=h=>{if(h.stopPropagation(),n.value&&a.value){const s=n.value.getBoundingClientRect(),C=a.value.offsetWidth;let f=h.clientX-s.left;f=Math.max(C/2,f),f=Math.min(f,s.width-C/2);const H=1-(f-C/2)/(s.width-C);r.lightness=H,o("change",H)}};return b.tryOnMounted(()=>{const h={drag:s=>{B(s)},end:s=>{B(s)}};n.value&&a.value&&X.DOMUtils.triggerDragEvent(n.value,h)}),{barElement:n,cursorElement:a,getCursorStyle:c,getBackgroundStyle:_,onClickSider:y}}}),Qt="";function Ae(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-lightness-slider",{"small-slider":t.size==="small"}])},[e.createElementVNode("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:e.normalizeStyle(t.getBackgroundStyle),onClick:o[0]||(o[0]=(...d)=>t.onClickSider&&t.onClickSider(...d))},[e.createElementVNode("div",{class:e.normalizeClass(["vc-lightness-slider__bar-pointer",{"small-bar":t.size==="small"}]),ref:"cursorElement",style:e.normalizeStyle(t.getCursorStyle)},o[1]||(o[1]=[e.createElementVNode("div",{class:"vc-lightness-slider__bar-handle"},null,-1)]),6)],4)],2)}const ue=A(He,[["render",Ae],["__scopeId","data-v-9836acab"]]),De=e.defineComponent({name:"History",props:{colors:p.arrayOf(String).def(()=>[]),round:p.bool.def(!1)},emits:["change"],setup(t,{emit:o}){return{onColorSelect:a=>{o("change",a)}}}}),Tt="",Le={key:0,class:"vc-colorPicker__record"},Re={class:"color-list"},Me=["onClick"];function ze(t,o,n,a,r,l){return t.colors&&t.colors.length>0?(e.openBlock(),e.createElementBlock("div",Le,[e.createElementVNode("div",Re,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.colors,(d,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:e.normalizeClass(["color-item","transparent",{"color-item__round":t.round}]),onClick:u=>t.onColorSelect(d)},[e.createElementVNode("div",{class:"color-item__display",style:e.normalizeStyle({backgroundColor:d})},null,4)],10,Me))),128))])])):e.createCommentVNode("",!0)}const oe=A(De,[["render",ze],["__scopeId","data-v-9369baf5"]]),Ie=e.defineComponent({name:"Display",props:{color:p.instanceOf(w),disableAlpha:p.bool.def(!1)},emits:["update:color","change"],setup(t,{emit:o}){var c,y,B,h;const n=e.ref("hex"),a=e.reactive({color:t.color,hex:(c=t.color)==null?void 0:c.hex,alpha:((y=t.color)==null?void 0:y.alpha)+"%",rgba:(B=t.color)==null?void 0:B.RGB,previewBgColor:(h=t.color)==null?void 0:h.toRgbString()}),{isSupported:r,open:l,sRGBHex:d}=b.useEyeDropper(),i=e.computed(()=>({background:a.previewBgColor})),u=()=>{n.value=n.value==="rgba"?"hex":"rgba"},_=b.useDebounceFn(s=>{if(!s.target.value)return;let C=parseInt(s.target.value.replace("%",""));C>100&&(s.target.value="100%",C=100),C<0&&(s.target.value="0%",C=0),isNaN(C)&&(s.target.value="100%",C=100),!isNaN(C)&&a.color&&(a.color.alpha=C),o("update:color",a.color),o("change",a.color)},300),g=b.useDebounceFn((s,C)=>{if(s.target.value){if(n.value==="hex"){const f=s.target.value.replace("#","");V(f).isValid()&&a.color&&(a.color.hex=f)}else if(C!==void 0&&a.rgba&&a.color){s.target.value<0&&(s.target.value=0),C===3&&s.target.value>1&&(s.target.value=1),C<3&&s.target.value>255&&(s.target.value=255),a.rgba[C]=Number(s.target.value);const[f,H,D,L]=a.rgba;a.color.hex=V({r:f,g:H,b:D}).toHex(),a.color.alpha=Math.floor(L*100)}o("update:color",a.color),o("change",a.color)}},300);return b.whenever(()=>t.color,s=>{s&&(a.color=s,a.alpha=Math.floor(a.color.alpha)+"%",a.hex=a.color.hex,a.rgba=a.color.RGB)},{deep:!0}),b.whenever(()=>a.color,()=>{a.color&&(a.previewBgColor=a.color.toRgbString())},{deep:!0}),b.whenever(()=>d.value,()=>{d.value&&(a.color.hex=d.value,o("update:color",a.color),o("change",a.color))}),{state:a,getBgColorStyle:i,inputType:n,onInputTypeChange:u,onAlphaBlur:_,onInputChange:g,isSupported:r,open:l}}}),xt="",Ke={class:"vc-display"},Oe={key:1,class:"vc-current-color2 vc-transparent"},We={key:2,style:{display:"flex",flex:"1",gap:"4px",height:"100%"}},Fe={class:"vc-color-input"},Ge=["value"],Xe={key:0,class:"vc-alpha-input"},qe=["value"],Ye={key:3,style:{display:"flex",flex:"1",gap:"4px",height:"100%"}},je=["value","onInput"];function Ue(t,o,n,a,r,l){return e.openBlock(),e.createElementBlock("div",Ke,[(t.isSupported,e.openBlock(),e.createElementBlock("div",Oe,[e.createElementVNode("div",{class:"color-cube",style:e.normalizeStyle(t.getBgColorStyle)},null,4)])),t.inputType==="hex"?(e.openBlock(),e.createElementBlock("div",We,[e.createElementVNode("div",Fe,[e.createElementVNode("input",{value:t.state.hex,onInput:o[1]||(o[1]=(...d)=>t.onInputChange&&t.onInputChange(...d))},null,40,Ge)]),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Xe,[e.createElementVNode("input",{class:"vc-alpha-input__inner",value:parseInt(t.state.alpha),onInput:o[2]||(o[2]=(...d)=>t.onAlphaBlur&&t.onAlphaBlur(...d))},null,40,qe)]))])):t.state.rgba?(e.openBlock(),e.createElementBlock("div",Ye,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.state.rgba,(d,i)=>(e.openBlock(),e.createElementBlock("div",{class:"vc-rgb-input",key:i},[e.createElementVNode("div",null,[e.createElementVNode("input",{value:d.toFixed(2),onInput:u=>t.onInputChange(u,i)},null,40,je)]),e.createElementVNode("div",null,e.toDisplayString(["R","G","B","A"][i]),1)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"vc-input-toggle",onClick:o[3]||(o[3]=(...d)=>t.onInputTypeChange&&t.onInputTypeChange(...d))})])}const ne=A(Ie,[["render",Ue],["__scopeId","data-v-c2960dc8"]]),Ze=e.defineComponent({name:"FkColorPicker",components:{Display:ne,Alpha:x,Palette:he,Board:ee,Hue:te,Lightness:ue,History:oe},props:{color:p.instanceOf(w),disableHistory:p.bool.def(!1),roundHistory:p.bool.def(!1),disableAlpha:p.bool.def(!1),defaultColors:{type:Array,default:void 0}},emits:["update:color","change","advanceChange"],setup(t,{emit:o}){const n=t.color||new w,a=e.reactive({color:n,hex:n.toHexString(),rgb:n.toRgbString()}),r=e.ref(!1),l=e.computed(()=>({background:a.rgb})),d=()=>{r.value=!1,o("advanceChange",!1)},i=b.useLocalStorage(Q,[],{}),u=b.useDebounceFn(()=>{if(t.disableHistory)return;const s=a.color.toRgbString();if(i.value=i.value.filter(C=>!V.equals(C,s)),!i.value.includes(s)){for(;i.value.length>T;)i.value.pop();i.value.unshift(s)}},500),_=s=>{s==="advance"?(r.value=!0,o("advanceChange",!0)):(a.color.hex=s,o("advanceChange",!1))},g=s=>{a.color.alpha=s},c=s=>{a.color.hue=s},y=(s,C)=>{a.color.saturation=s,a.color.brightness=C},B=s=>{a.color.lightness=s},h=s=>{const f=s.target.value.replace("#","");V(f).isValid()&&(a.color.hex=f)};return b.whenever(()=>t.color,s=>{s&&(a.color=s)},{deep:!0}),b.whenever(()=>a.color,()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),u(),o("update:color",a.color),o("change",a.color)},{deep:!0}),{state:a,advancePanelShow:r,onBack:d,onCompactChange:_,onAlphaChange:g,onHueChange:c,onBoardChange:y,onLightChange:B,onInputChange:h,previewStyle:l,historyColors:i}}}),eo="",Je={class:"vc-fk-colorPicker"},Qe={class:"vc-fk-colorPicker__inner"},Te={class:"vc-fk-colorPicker__header"};function xe(t,o,n,a,r,l){const d=e.resolveComponent("Palette"),i=e.resolveComponent("Board"),u=e.resolveComponent("Hue"),_=e.resolveComponent("Lightness"),g=e.resolveComponent("Alpha"),c=e.resolveComponent("Display"),y=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",Je,[e.createElementVNode("div",Qe,[e.createElementVNode("div",Te,[t.advancePanelShow?(e.openBlock(),e.createElementBlock("span",{key:0,style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...B)=>t.onBack&&t.onBack(...B))},o[1]||(o[1]=[e.createElementVNode("div",{class:"back"},null,-1)]))):e.createCommentVNode("",!0)]),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(d,{key:0,onChange:t.onCompactChange,"default-colors":t.defaultColors},null,8,["onChange","default-colors"])),t.advancePanelShow?(e.openBlock(),e.createBlock(i,{key:1,color:t.state.color,onChange:t.onBoardChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?(e.openBlock(),e.createBlock(u,{key:2,color:t.state.color,onChange:t.onHueChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(_,{key:3,color:t.state.color,onChange:t.onLightChange},null,8,["color","onChange"])),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:4,color:t.state.color,onChange:t.onAlphaChange},null,8,["color","onChange"])),e.createVNode(c,{color:t.state.color,"disable-alpha":t.disableAlpha},null,8,["color","disable-alpha"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(y,{key:5,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])])}const pe=A(Ze,[["render",xe],["__scopeId","data-v-0e3f0858"]]),et=e.defineComponent({name:"ChromeColorPicker",components:{Display:ne,Alpha:x,Board:ee,Hue:te,History:oe},props:{color:p.instanceOf(w),disableHistory:p.bool.def(!1),roundHistory:p.bool.def(!1),disableAlpha:p.bool.def(!1)},emits:["update:color","change"],setup(t,{emit:o}){const n=t.color||new w,a=e.reactive({color:n,hex:n.toHexString(),rgb:n.toRgbString()}),r=e.computed(()=>({background:a.rgb})),l=b.useLocalStorage(Q,[],{}),d=b.useDebounceFn(()=>{if(t.disableHistory)return;const c=a.color.toRgbString();if(l.value=l.value.filter(y=>!V.equals(y,c)),!l.value.includes(c)){for(;l.value.length>T;)l.value.pop();l.value.unshift(c)}},500),i=c=>{a.color.alpha=c},u=c=>{a.color.hue=c},_=(c,y)=>{a.color.saturation=c,a.color.brightness=y},g=c=>{c!=="advance"&&(a.color.hex=c)};return b.whenever(()=>t.color,c=>{c&&(a.color=c)},{deep:!0}),b.whenever(()=>a.color,()=>{a.hex=a.color.hex,a.rgb=a.color.toRgbString(),d(),o("update:color",a.color),o("change",a.color)},{deep:!0}),{state:a,previewStyle:r,historyColors:l,onAlphaChange:i,onHueChange:u,onBoardChange:_,onCompactChange:g}}}),to="",tt={class:"vc-chrome-colorPicker"},ot={class:"vc-chrome-colorPicker-body"},nt={class:"chrome-controls"},at={class:"chrome-sliders"};function rt(t,o,n,a,r,l){const d=e.resolveComponent("Board"),i=e.resolveComponent("Hue"),u=e.resolveComponent("Alpha"),_=e.resolveComponent("Display"),g=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",tt,[e.createVNode(d,{round:!0,hide:!1,color:t.state.color,onChange:t.onBoardChange},null,8,["color","onChange"]),e.createElementVNode("div",ot,[e.createElementVNode("div",nt,[e.createElementVNode("div",at,[e.createVNode(i,{size:"small",color:t.state.color,onChange:t.onHueChange},null,8,["color","onChange"]),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(u,{key:0,size:"small",color:t.state.color,onChange:t.onAlphaChange},null,8,["color","onChange"]))])]),e.createVNode(_,{color:t.state.color,"disable-alpha":t.disableAlpha},null,8,["color","disable-alpha"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:0,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])])}const fe=A(et,[["render",rt],["__scopeId","data-v-00ebf251"]]),ae="ColorPickersProvider",lt=(t,o)=>{const n=t.getBoundingClientRect(),a=n.left+n.width/2,r=n.top+n.height/2,l=Math.abs(a-o.clientX),d=Math.abs(r-o.clientY),i=Math.sqrt(Math.pow(l,2)+Math.pow(d,2)),u=d/i,_=Math.acos(u);let g=Math.floor(180/(Math.PI/_));return o.clientX>a&&o.clientY>r&&(g=180-g),o.clientX==a&&o.clientY>r&&(g=180),o.clientX>a&&o.clientY==r&&(g=90),o.clientX<a&&o.clientY>r&&(g=180+g),o.clientX<a&&o.clientY==r&&(g=270),o.clientX<a&&o.clientY<r&&(g=360-g),g};let re=!1;const st=(t,o)=>{const n=function(r){var l;(l=o.drag)==null||l.call(o,r)},a=function(r){var l;document.removeEventListener("mousemove",n,!1),document.removeEventListener("mouseup",a,!1),document.onselectstart=null,document.ondragstart=null,re=!1,(l=o.end)==null||l.call(o,r)};t&&t.addEventListener("mousedown",r=>{var l;re||(document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",a,!1),re=!0,(l=o.start)==null||l.call(o,r))})},oo="",it={angle:{type:Number,default:0},size:{type:Number,default:16,validator:t=>t>=16},borderWidth:{type:Number,default:1,validator:t=>t>=1},borderColor:{type:String,default:"#666"}},ct=e.defineComponent({name:"Angle",props:it,emits:["update:angle","change"],setup(t,{emit:o}){const n=e.ref(null),a=e.ref(0);e.watch(()=>t.angle,i=>{a.value=i});const r=()=>{let i=Number(a.value);isNaN(i)||(i=i>360||i<0?t.angle:i,a.value=i===360?0:i,o("update:angle",a.value),o("change",a.value))},l=e.computed(()=>({width:t.size+"px",height:t.size+"px",borderWidth:t.borderWidth+"px",borderColor:t.borderColor,transform:`rotate(${a.value}deg)`})),d=i=>{n.value&&(a.value=lt(n.value,i)%360,r())};return e.onMounted(()=>{const i={drag:u=>{d(u)},end:u=>{d(u)}};n.value&&st(n.value,i)}),()=>e.createVNode("div",{class:"bee-angle"},[e.createVNode("div",{class:"bee-angle__round",ref:n,style:l.value},null)])}});function Y(t){let o;if(Array.isArray(t))o=[],t.forEach(n=>{o.push(Y(n))});else if(typeof t=="object"&&t!==null){o={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(o[n]=Y(t[n]))}else o=t;return o}function dt(t,o=2){const n=new RegExp(`^\\d+(?:\\.\\d{0,${o}})?`,"g");return t.match(n)?t.match(n):""}const gt=e.defineComponent({name:"GradientColorPicker",components:{Angle:ct,Display:ne,Alpha:x,Palette:he,Board:ee,Hue:te,Lightness:ue,History:oe},props:{angle:p.number.def(0),type:p.oneOf(["linear","radial"]).def("linear"),disableHistory:p.bool.def(!1),roundHistory:p.bool.def(!1),disableAlpha:p.bool.def(!1),pickerType:p.oneOf(["fk","chrome"]).def("fk"),colors:p.array.def([]),colorStops:p.array.def([]),gradientType:p.oneOf(["both","liner","radial"]).def("both"),defaultColors:{type:Array,default:void 0}},emits:["update:startColor","update:endColor","update:angle","gradientChange","advanceChange","angleChange","typeChange"],setup(t,{emit:o}){const n=e.reactive({angle:t.angle,type:t.gradientType=="both"?t.type:t.gradientType,colors:t.colors,colorStops:t.colorStops,selectIndex:0,movePst:{x:0,y:0},pageX:0,pageY:0,mouseStartPst:{x:0,y:0},startMovePst:0});let a=!1;const r=e.inject(ae),l=e.ref(t.pickerType==="chrome"),d=e.ref(),i=e.ref(),u=e.ref(),_=e.ref();e.watch(()=>[t.angle],m=>{n.angle=m[0]}),e.watch(()=>t.type,m=>{n.type=m});const g=e.computed({get:()=>n.colors[n.selectIndex],set:m=>{n.colors[n.selectIndex]=m}}),c=e.computed(()=>{const m=Y(n.colors).sort((R,U)=>R.pst-U.pst).map(R=>`${R.toRgbString()} ${dt(String(R.pst)||"",5)}%`);let v=`background:linear-gradient(${n.angle}deg, ${m.join(",")})`;return n.type==="radial"&&(v=`background: radial-gradient(circle,  ${m.join(",")})`),v}),y=e.computed(()=>t.gradientType=="both"?["linear","radial"]:[]),B=m=>{a&&(n.movePst.x=m.pageX-n.mouseStartPst.x,n.movePst.y=m.pageY-n.mouseStartPst.y,n.pageX=m.pageX,n.pageY=m.pageY,h())},h=()=>{if(_.value){const m=_.value.getBoundingClientRect().width;let v=(n.startMovePst*m/100+n.movePst.x)/m;v>1?v=1:v<0&&(v=0),n.colors[n.selectIndex].pst=Math.round(v*100),o("gradientChange",n.colors)}},s=()=>{a=!1,C()},C=()=>{f()},f=()=>{a=!1,n.mouseStartPst={x:0,y:0},n.movePst.x=0,n.movePst.y=0},H=()=>{b.useEventListener(document.body,"mousemove",B),b.useEventListener(document.body,"mouseup",s)},D=m=>{m.key==="Delete"&&n.colors.length>2&&(n.colors.splice(n.selectIndex,1),n.selectIndex=Math.min(n.selectIndex,n.colors.length-1),o("gradientChange",n.colors))},L=m=>{n.selectIndex!==m&&(n.selectIndex=m)},M=()=>{n.startMovePst=n.colors[n.selectIndex].pst},K=(m,v)=>{H();const R=v;L(m),a=!0,n.mouseStartPst.x=R.pageX,n.mouseStartPst.y=R.pageY,M()},k=m=>{if(_.value){const v=_.value.getBoundingClientRect(),R=v.left,U=m.pageX-R,Wt=Y(n.colors).sort((W,Z)=>W.pst-Z.pst).map(W=>W.toHexString()),Ft=new ye(0,v.width,Wt).getColor(U).toHexString(),Gt=100*U/v.width,me=new w(Ft);me.pst=Gt,n.colors.push(me),n.selectIndex=n.colors.length-1,e.nextTick(()=>{var Z;const W=(Z=d.value)==null?void 0:Z[n.selectIndex];W&&W.focus()}),o("gradientChange",n.colors)}},E=m=>{const v=m.target,R=parseInt(v.value.replace("°",""));isNaN(R)||(n.angle=R%360),o("update:angle",n.angle),o("angleChange",n.angle)},P=m=>{n.angle=m,o("update:angle",n.angle),o("angleChange",n.angle)},G=m=>{m==="advance"?(l.value=!0,o("advanceChange",!0)):(g.value.hex=m,o("advanceChange",!1)),z()},O=m=>{g.value.alpha=m,z()},le=m=>{g.value.hue=m,z()},se=(m,v)=>{g.value.saturation=m,g.value.brightness=v,z()},ie=m=>{g.value.lightness=m,z()},ce=()=>{z()},z=()=>{o("gradientChange",n.colors)},j=()=>{l.value=!1,o("advanceChange",!1)},Kt=()=>{n.type=n.type==="linear"?"radial":"linear",o("typeChange",n.type)},I=b.useLocalStorage(Q,[],{}),Ot=b.useDebounceFn(()=>{if(t.disableHistory)return;const m=g.value.toRgbString();if(I.value=I.value.filter(v=>!V.equals(v,m)),!I.value.includes(m)){for(;I.value.length>T;)I.value.pop();I.value.unshift(m)}},100);return b.whenever(()=>g.value,()=>{Ot()},{deep:!0}),{handlePotBar:k,refColorBar:_,startGradientRef:d,stopGradientRef:i,colorRangeRef:u,state:n,currentColor:g,gradientBg:c,advancePanelShow:l,onDegreeBlur:E,onCompactChange:G,onAlphaChange:O,onHueChange:le,onBoardChange:se,onLightChange:ie,historyColors:I,onBack:j,onDegreeChange:P,onDisplayChange:ce,onTypeChange:Kt,lang:r==null?void 0:r.lang,sliderPotDown:K,clickGColorPot:L,getGradientTypes:y,handleKeyDown:D}}}),no="",ht={class:"vc-gradient-picker"},ut={class:"vc-gradient-picker__header"},pt={key:0,class:"vc-gradient__types"},ft={class:"vc-gradient-picker__body"},Ct={class:"vc-color-range",ref:"colorRangeRef"},mt={class:"vc-color-range__container",ref:"refColorBar"},bt={class:"vc-gradient__stop__container"},yt=["onMousedown","onClick"],kt={class:"vc-picker-degree-input vc-degree-input"},_t={class:"vc-degree-input__control"},Bt=["value"],St={class:"vc-degree-input__panel"},Vt={class:"vc-degree-input__disk"};function $t(t,o,n,a,r,l){const d=e.resolveComponent("Angle"),i=e.resolveComponent("Board"),u=e.resolveComponent("Hue"),_=e.resolveComponent("Palette"),g=e.resolveComponent("Lightness"),c=e.resolveComponent("Alpha"),y=e.resolveComponent("Display"),B=e.resolveComponent("History");return e.openBlock(),e.createElementBlock("div",ht,[e.createElementVNode("div",ut,[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("div",{class:"back",style:{cursor:"pointer"},onClick:o[0]||(o[0]=(...h)=>t.onBack&&t.onBack(...h))},null,512),[[e.vShow,t.pickerType==="fk"&&t.advancePanelShow]])]),t.getGradientTypes.length==2?(e.openBlock(),e.createElementBlock("div",pt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.getGradientTypes,h=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-gradient__type",{active:t.state.type===h}]),key:h,onClick:o[1]||(o[1]=(...s)=>t.onTypeChange&&t.onTypeChange(...s))},e.toDisplayString(t.lang?t.lang[h]:h),3))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("div",ft,[e.createElementVNode("div",Ct,[e.createElementVNode("div",mt,[e.createElementVNode("div",{class:"vc-background",style:e.normalizeStyle(t.gradientBg),onClick:o[2]||(o[2]=(...h)=>t.handlePotBar&&t.handlePotBar(...h))},null,4),e.createElementVNode("div",bt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.colors,(h,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-gradient__stop",{"vc-gradient__stop--current":s==t.state.selectIndex}]),key:s,ref_for:!0,ref:"startGradientRef",style:e.normalizeStyle({left:`calc(${h.pst+"%"} - 8px)`}),onMousedown:C=>t.sliderPotDown(s,C),onClick:C=>t.clickGColorPot(s),onKeyup:o[3]||(o[3]=e.withModifiers((...C)=>t.handleKeyDown&&t.handleKeyDown(...C),["stop","prevent"])),tabindex:"0"},o[6]||(o[6]=[e.createElementVNode("span",{class:"vc-gradient__stop--inner"},null,-1)]),46,yt))),128))])],512)],512),e.createElementVNode("div",kt,[e.createElementVNode("div",_t,[e.createElementVNode("input",{value:t.state.angle,onBlur:o[4]||(o[4]=(...h)=>t.onDegreeBlur&&t.onDegreeBlur(...h))},null,40,Bt),o[7]||(o[7]=e.createTextVNode("deg "))]),e.createElementVNode("div",St,[e.createElementVNode("div",Vt,[e.createVNode(d,{angle:t.state.angle,"onUpdate:angle":o[5]||(o[5]=h=>t.state.angle=h),size:40,onChange:t.onDegreeChange},null,8,["angle","onChange"])])])])]),t.advancePanelShow?(e.openBlock(),e.createBlock(i,{key:0,color:t.currentColor,onChange:t.onBoardChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?(e.openBlock(),e.createBlock(u,{key:1,color:t.currentColor,onChange:t.onHueChange},null,8,["color","onChange"])):e.createCommentVNode("",!0),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(_,{key:2,onChange:t.onCompactChange,"default-colors":t.defaultColors},null,8,["onChange","default-colors"])),t.advancePanelShow?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:3,color:t.currentColor,onChange:t.onLightChange},null,8,["color","onChange"])),t.disableAlpha?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(c,{key:4,color:t.currentColor,onChange:t.onAlphaChange},null,8,["color","onChange"])),e.createVNode(y,{color:t.currentColor,"disable-alpha":t.disableAlpha,onChange:t.onDisplayChange},null,8,["color","disable-alpha","onChange"]),t.disableHistory?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(B,{key:5,round:t.roundHistory,colors:t.historyColors,onChange:t.onCompactChange},null,8,["round","colors","onChange"]))])}const Ce=A(gt,[["render",$t],["__scopeId","data-v-e0324175"]]),Et=e.defineComponent({name:"WrapContainer",props:{theme:p.oneOf(["white","black"]).def("white"),showTab:p.bool.def(!1),activeKey:p.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(t,{emit:o}){const n=e.reactive({activeKey:t.activeKey}),a=e.inject(ae),r=l=>{n.activeKey=l,o("update:activeKey",l),o("change",l)};return b.whenever(()=>t.activeKey,l=>{n.activeKey=l}),{state:n,onActiveKeyChange:r,lang:a==null?void 0:a.lang}}}),ao="",vt={class:"vc-colorpicker--container"},wt={key:0,class:"vc-colorpicker--tabs"},Nt={class:"vc-colorpicker--tabs__inner"},Pt={class:"vc-btn__content"},Ht={class:"vc-btn__content"};function At(t,o,n,a,r,l){var d,i;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vc-colorpicker",t.theme])},[e.createElementVNode("div",vt,[t.showTab?(e.openBlock(),e.createElementBlock("div",wt,[e.createElementVNode("div",Nt,[e.createElementVNode("div",{class:e.normalizeClass(["vc-colorpicker--tabs__btn",{"vc-btn-active":t.state.activeKey==="pure"}]),onClick:o[0]||(o[0]=u=>t.onActiveKeyChange("pure"))},[e.createElementVNode("button",null,[e.createElementVNode("div",Pt,e.toDisplayString((d=t.lang)==null?void 0:d.pure),1)])],2),e.createElementVNode("div",{class:e.normalizeClass(["vc-colorpicker--tabs__btn",{"vc-btn-active":t.state.activeKey==="gradient"}]),onClick:o[1]||(o[1]=u=>t.onActiveKeyChange("gradient"))},[e.createElementVNode("button",null,[e.createElementVNode("div",Ht,e.toDisplayString((i=t.lang)==null?void 0:i.gradient),1)])],2),e.createElementVNode("div",{class:"vc-colorpicker--tabs__bg",style:e.normalizeStyle({width:"50%",left:`calc(${t.state.activeKey==="gradient"?50:0}%)`})},null,4)])])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"default",{},void 0,!0)])],2)}const Dt=A(Et,[["render",At],["__scopeId","data-v-73cd7770"]]),Lt={En:{start:"Start",end:"End",pure:"Pure",gradient:"Gradient",linear:"linear",radial:"radial"},"ZH-cn":{start:"开始",end:"结束",pure:"纯色",gradient:"渐变",linear:"线性",radial:"径向"}},Rt={isWidget:p.bool.def(!1),pickerType:p.oneOf(["fk","chrome"]).def("fk"),shape:p.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:p.string.def(""),format:{type:String,default:"rgb"},disableAlpha:p.bool.def(!1),disableHistory:p.bool.def(!1),roundHistory:p.bool.def(!1),useType:p.oneOf(["pure","gradient","both"]).def("pure"),activeKey:p.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:p.number.def(9999),pickerContainer:{type:[String,HTMLElement],default:"body"},debounce:p.number.def(100),theme:p.oneOf(["white","black"]).def("white"),gradientData:p.object.def({}),gradientType:p.oneOf(["both","liner","radial"]).def("both"),defaultColors:{type:Array,default:void 0}},Mt=e.defineComponent({name:"ColorPicker",components:{FkColorPicker:pe,ChromeColorPicker:fe,GradientColorPicker:Ce,WrapContainer:Dt},inheritAttrs:!1,props:Rt,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange","update:gradientData","gradientDataChange"],setup(t,{emit:o}){e.provide(ae,{lang:e.computed(()=>Lt[t.lang||"ZH-cn"])});const n=e.reactive({pureColor:t.pureColor||"",activeKey:t.useType==="gradient"?"gradient":t.activeKey,isAdvanceMode:!1}),a=new w(n.pureColor),r=e.reactive({colors:[],angle:0,type:"linear",gradientColor:t.gradientColor});!t.gradientColor&&t.gradientData&&t.gradientData.gradientColor?r.gradientColor=t.gradientData.gradientColor||"linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)":t.gradientColor||(r.gradientColor="linear-gradient(90deg, rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 100%)");const l=e.ref(a),d=e.ref(!1),i=e.ref(null),u=e.ref(null);let _=null;const g=e.computed(()=>({background:n.activeKey!=="gradient"?V(n.pureColor).toRgbString():r.gradientColor})),c=e.computed(()=>n.activeKey==="gradient"?Ce.name:t.pickerType==="fk"?pe.name:fe.name),y=k=>{n.isAdvanceMode=k},B=e.computed(()=>{const k={disableAlpha:t.disableAlpha,disableHistory:t.disableHistory,roundHistory:t.roundHistory,pickerType:t.pickerType,defaultColors:t.defaultColors};return n.activeKey==="gradient"?{...k,angle:r.angle,type:r.type,colors:r.colors,gradientType:t.gradientType,onAngleChange:E=>{r.angle=E,f()},onTypeChange:E=>{r.type=E,f()},onGradientChange:E=>{r.colors=E,f()},onAdvanceChange:y}:{...k,disableAlpha:t.disableAlpha,disableHistory:t.disableHistory,roundHistory:t.roundHistory,color:l.value,onChange:L,onAdvanceChange:y}}),h=()=>{d.value=!0,_?_.update():D()},s=()=>{d.value=!1},C=()=>{var k,E;try{const[P]=de.parse(r.gradientColor);P&&P.type.includes("gradient")&&P.colorStops.length>=2&&(P.colorStops.forEach((G,O)=>{var j;const le=Number((j=G.length)==null?void 0:j.value)||0,[se,ie,ce,z]=G.value;r.colors[O]=new w({r:Number(se),g:Number(ie),b:Number(ce),a:Number(z)}),r.colors[O].pst=le}),P.type==="linear-gradient"&&((k=P.orientation)==null?void 0:k.type)==="angular"&&(r.angle=Number((E=P.orientation)==null?void 0:E.value)||0),r.type=P.type.split("-")[0])}catch(P){console.log(`[Parse Color]: ${P}`)}},f=b.useDebounceFn(()=>{const k=H();try{r.gradientColor=de.stringify(k),o("update:gradientColor",r.gradientColor),o("gradientColorChange",r.gradientColor);const E=k[0];E.gradientColor=r.gradientColor,o("gradientDataChange",E),o("update:gradientData",E)}catch(E){console.log(E)}},t.debounce),H=()=>{const k=[],E=r.colors.map(P=>({type:"rgba",value:P.RGB.map(O=>O.toString()),length:{value:P.pst+"",type:"%"}}));return r.type==="linear"?k.push({type:"linear-gradient",orientation:{type:"angular",value:r.angle+""},colorStops:E}):r.type==="radial"&&k.push({type:"radial-gradient",orientation:[{type:"shape",value:"circle"}],colorStops:E}),k},D=()=>{i.value&&u.value&&(_=be.createPopper(i.value,u.value,{placement:"auto",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"flip",options:{allowedAutoPlacements:["top","bottom","left","right"],rootBoundary:"viewport"}}]}))},L=k=>{l.value=k,n.pureColor=k.toString(t.format),M()},M=b.useDebounceFn(()=>{o("update:pureColor",n.pureColor),o("pureColorChange",n.pureColor)},t.debounce);b.onClickOutside(u,()=>{s()});const K=k=>{n.activeKey=k,o("update:activeKey",k),o("activeKeyChange",k)};return b.tryOnMounted(()=>{C()}),b.whenever(()=>t.gradientColor,k=>{k!=r.gradientColor&&(r.gradientColor=k)}),b.whenever(()=>r.gradientColor,()=>{C()}),b.whenever(()=>t.activeKey,k=>{n.activeKey=k}),b.whenever(()=>t.useType,k=>{n.activeKey!=="gradient"&&k==="gradient"?n.activeKey="gradient":n.activeKey="pure"}),b.whenever(()=>t.pureColor,k=>{V.equals(k,n.pureColor)||(n.pureColor=k,l.value=new w(k))},{deep:!0}),{colorCubeRef:i,pickerRef:u,showPicker:d,colorInstance:l,getBgColorStyle:g,onColorChange:L,onShowPicker:h,onActiveKeyChange:K,getComponentName:c,getBindArgs:B,state:n}}}),so="";function zt(t,o,n,a,r,l){const d=e.resolveComponent("WrapContainer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.isWidget?(e.openBlock(),e.createBlock(d,{key:0,"active-key":t.state.activeKey,"onUpdate:activeKey":o[0]||(o[0]=i=>t.state.activeKey=i),"show-tab":t.useType==="both",onChange:t.onActiveKeyChange,style:e.normalizeStyle({zIndex:t.zIndex}),theme:t.theme},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponentName),e.mergeProps({key:t.getComponentName},t.getBindArgs),null,16))]),_:1},8,["active-key","show-tab","onChange","style","theme"])):e.createCommentVNode("",!0),t.isWidget?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",{class:e.normalizeClass(["vc-color-wrap transparent",{round:t.shape==="circle"}]),ref:"colorCubeRef"},[e.createElementVNode("div",{class:"current-color",style:e.normalizeStyle(t.getBgColorStyle),onClick:o[1]||(o[1]=(...i)=>t.onShowPicker&&t.onShowPicker(...i))},null,4)],2),(e.openBlock(),e.createBlock(e.Teleport,{to:t.pickerContainer},[e.withDirectives(e.createElementVNode("div",{ref:"pickerRef",style:e.normalizeStyle({zIndex:t.zIndex})},[t.showPicker?(e.openBlock(),e.createBlock(d,{key:0,"show-tab":t.useType==="both"&&!t.state.isAdvanceMode,"active-key":t.state.activeKey,"onUpdate:activeKey":o[2]||(o[2]=i=>t.state.activeKey=i),onChange:t.onActiveKeyChange,theme:t.theme},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponentName),e.mergeProps({key:t.getComponentName},t.getBindArgs),null,16))]),_:1},8,["show-tab","active-key","onChange","theme"])):e.createCommentVNode("",!0)],4),[[e.vShow,t.showPicker]])],8,["to"]))],64))],64)}const F=A(Mt,[["render",zt],["__scopeId","data-v-457e5e58"]]),It={install:t=>{t.component(F.name,F),t.component("Vue3"+F.name,F)}};S.Color=w,S.ColorPicker=F,S.default=It,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
